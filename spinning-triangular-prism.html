<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Spinning ASCII Triangular Prism</title>
  <style>
    body {
      margin: 0;
      background: black;
      color: white;
      font-family: monospace;
      overflow: hidden;
    }
    pre {
      font-size: 15px;
      line-height: 10px;
      white-space: pre;
      text-align: center;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
  </style>
</head>
<body>
  <pre id="prism"></pre>

  <script>
    const prismEl = document.getElementById('prism');

    // 6 points: front triangle (z = -1), back triangle (z = +1)
    const points = [
      [ 1,  1, -1], // 0 front right
      [-1,  1, -1], // 1 front left
      [ 0, -1, -1], // 2 front bottom
      [ 1,  1,  1], // 3 back right
      [-1,  1,  1], // 4 back left
      [ 0, -1,  1]  // 5 back bottom
    ];

    // Edges: 3 front, 3 back, 3 connecting corresponding vertices
    const edges = [
      [0,1], [1,2], [2,0],   // front triangle
      [3,4], [4,5], [5,3],   // back triangle
      [0,3], [1,4], [2,5]    // side edges
    ];

    const scale = 12;    // adjust to fit width/height
    let angle = 0;

    // Rotate around Y-axis
    function rotateY([x, y, z], theta) {
      const c = Math.cos(theta), s = Math.sin(theta);
      return [
        c*x - s*z,
        y,
        s*x + c*z
      ];
    }

    // Simple perspective projection
    function project([x, y, z]) {
      const dist = 3;  // distance from camera to origin
      const factor = dist / (dist + z);
      return [
        Math.round(x * factor * scale),
        Math.round(y * factor * scale)
      ];
    }

    function drawLine(buffer, x0, y0, x1, y1) {
      x0 = Math.round(x0); y0 = Math.round(y0);
      x1 = Math.round(x1); y1 = Math.round(y1);
      const dx = Math.abs(x1 - x0), sx = x0 < x1 ? 1 : -1;
      const dy = -Math.abs(y1 - y0), sy = y0 < y1 ? 1 : -1;
      let err = dx + dy;
      while (true) {
        if (
          y0 >= 0 && y0 < buffer.length &&
          x0 >= 0 && x0 < buffer[0].length
        ) buffer[y0][x0] = '#';
        if (x0 === x1 && y0 === y1) break;
        const e2 = 2 * err;
        if (e2 >= dy) { err += dy; x0 += sx; }
        if (e2 <= dx) { err += dx; y0 += sy; }
      }
    }

    function render() {
      const width = 80, height = 40;
      // create empty buffer
      const buffer = Array.from({length: height}, () =>
        Array(width).fill(' ')
      );

      // rotate & project all points
      const rotPts = points.map(p => rotateY(p, angle));
      const projPts = rotPts.map(project);

      // draw all edges
      for (const [i, j] of edges) {
        const [x0, y0] = projPts[i];
        const [x1, y1] = projPts[j];
        drawLine(buffer,
          x0 + width/2, y0 + height/2,
          x1 + width/2, y1 + height/2
        );
      }

      // render to <pre>
      prismEl.textContent = buffer.map(r => r.join('')).join('\n');
      angle += 0.04;  // speed
      requestAnimationFrame(render);
    }

    render();
  </script>
</body>
</html>
